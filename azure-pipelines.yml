# azure-pipelines.yml

trigger:
  branches:
    include:
      - main  # Trigger the pipeline when changes are pushed to the 'main' branch

pool:
  agent: 'default'  # Use an Ubuntu agent for the build (can be adjusted based on your requirements)

steps:
  - script: |
      echo "Starting Azure Pipeline..."
    displayName: 'Initialize Pipeline'

  - checkout: self  # Check out the source code repository

  - task: JavaToolInstaller@0
    inputs:
      versionSpec: '11'  # Install Java version 11
      jdkArchitectureOption: 'x64'  # Specify architecture (x64 or x86)

  - script: |
      java -version  # Verify Java version
      mvn -version  # Verify Maven installation
      mvn clean package  # Replace with your Maven build command
    displayName: 'Maven Build'

  - task: PublishBuildArtifacts@1
    inputs:
      pathtoPublish: '$(System.DefaultWorkingDirectory)/target/*.jar'  # Path to publish JAR artifact
      artifactName: 'java-app'  # Name of the artifact to publish
    displayName: 'Publish Artifact'

# Add additional steps for testing, deploying, or other tasks as needed
